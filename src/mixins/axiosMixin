import Axios from '../lib/axios.js'


export default {
    methods: {

        async show(filter, type, i, page) {
            try {
                //Create API url
                let url = "https://api.jikan.moe/v3/" + filter + "/" + type
                if (filter === 'top' || filter === 'genre') {
                    
                    url += "/" + i + "/" + page
                }
                else if (filter === 'search') {
                    url += "?q=" + i + "&page=" + page
                }
                //Connect to API
                const axios = require('axios')
                //Wait the response and pass the url
                const result = await axios.get(url)

                //Pass result from API into table
                if (filter === 'genre') {
                    this.table = result.data[type]
                } else if (filter === 'search') {
                    this.table = result.data.results
                }
                else {
                    this.table = result.data[filter]
                }
                console.log(this.table)
                //  top === true ? this.result = response.data.top : this.result = response.data.anime
                console.log("Data fetched and displayed on page");

            } catch (e) {
                console.error(e)
            }
        },
    }
}

                /*    WORK IN PROGRESS
                let resultPretty = []
                if (result.status !== 200) throw new Error("Data not found")
                   result.anime.map((anime) => {
                       let objectToPush = {
                           Title: anime.title,
                           description: anime.synopsys || null,
                           image: anime.image_url
                       }
       
                       resultPretty.push(objectToPush)
                   }) */